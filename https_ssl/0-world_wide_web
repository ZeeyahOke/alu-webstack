#!/usr/bin/env bash
# Script that displays information about subdomains

# Function to get domain information
display_info() {
    local domain="$1"
    local subdomain="$2"
    
    # Get DNS information using dig and process the result
    local result
    result=$(dig "$subdomain.$domain" | grep -A1 'ANSWER SECTION:' | tail -1)
    
    # Check if result is not empty
    if [ -n "$result" ]; then
        # Extract the record type and destination IP
        local record_type
        record_type=$(echo "$result" | awk '{print $4}')
        
        local destination
        destination=$(echo "$result" | awk '{print $5}')
        
        # Display the information in the required format
        echo "The subdomain $subdomain is a $record_type record and points to $destination"
    fi
}

# Main script
domain="$1"
subdomain="$2"

# Check if domain parameter is provided
if [ -z "$domain" ]; then
    echo "Domain parameter is required"
    exit 1
fi

# If subdomain is provided, display information for that specific subdomain
if [ -n "$subdomain" ]; then
    display_info "$domain" "$subdomain"
else
    # Otherwise, display information for default subdomains in the specified order
    for sub in "www" "lb-01" "web-01" "web-02"
    do
        display_info "$domain" "$sub"
    done
fi"
